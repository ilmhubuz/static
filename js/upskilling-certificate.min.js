let cert=null;document.addEventListener('DOMContentLoaded',function(){var qr=new QRious({element:document.getElementById('qrcode'),value:window.location.href});const certId=window.location.pathname.split('/').pop();const apiUrl=`${window.location.origin}/api/certificates/${certId}`;fetch(apiUrl,{method:"GET"}).then((res)=>res.json()).then((data)=>{cert=data;document.getElementById('certificate-name').textContent=data.holder;document.getElementById('certificate-dates').textContent=`${data.from} ~ ${data.to}`;document.getElementById('learning-hours').textContent=data.learningHours;document.getElementById('certificate-id').textContent=data.number}).catch((error)=>{console.error('Error fetching certificate data:',error)})});async function downloadPDF(){if(!cert)return;const{jsPDF}=window.jspdf;const card=document.getElementById('card');card.style.borderRadius='0';card.style.margin='0';card.style.padding='1em';card.style.boxShadow='none';const canvas=await html2canvas(card,{scale:2,useCORS:true});card.style.borderRadius='4px';card.style.padding='2em';card.style.boxShadow='0 4px 8px rgba(0,0,0,0.1)';const imgData=canvas.toDataURL('image/png');const pdf=new jsPDF('p','mm','a4');const imgProps=pdf.getImageProperties(imgData);const pdfWidth=pdf.internal.pageSize.getWidth();const pdfHeight=(imgProps.height*pdfWidth)/imgProps.width;pdf.addImage(imgData,'PNG',0,0,pdfWidth,pdfHeight);pdf.save(`${cert.holder || 'certificate'}.pdf`)}