let cert=null;document.addEventListener("DOMContentLoaded",function(){new QRious({element:document.getElementById("qrcode"),value:window.location.href});const t=window.location.pathname.split("/").pop(),e=`${window.location.origin}/api/certificates/${t}`;fetch(e,{method:"GET"}).then(t=>t.json()).then(t=>{cert=t,document.getElementById("certificate-name").textContent=t.holder,document.getElementById("certificate-dates").textContent=`${t.from} ~ ${t.to}`,document.getElementById("learning-hours").textContent=t.learningHours,document.getElementById("certificate-id").textContent=t.number}).catch(t=>{console.error("Error fetching certificate data:",t)})});async function downloadPDF(){if(!cert)return;const{jsPDF:t}=window.jspdf,e=document.getElementById("card");await new Promise(r=>setTimeout(r,100));const n=await html2canvas(e,{scale:2,useCORS:!0}),o=n.toDataURL("image/png"),c=new t("p","mm","a4"),a=c.getImageProperties(o),i=c.internal.pageSize.getWidth(),d=a.height*i/a.width;c.addImage(o,"PNG",0,0,i,d),c.save(`${cert.holder||"certificate"}.pdf`)}