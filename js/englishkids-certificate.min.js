let certificate=null;document.addEventListener("DOMContentLoaded",function(){var e=new QRious({element:document.getElementById("qrcode"),value:window.location.href});const t=window.location.pathname.split("/").pop(),n=`${window.location.origin}/api/certificates/${t}`;fetch(n,{method:"GET"}).then(e=>e.json()).then(e=>{certificate=e,document.getElementById("names").textContent=e.holder,document.getElementById("level").textContent=e.level,document.getElementById("teacher").textContent=e.teacher}).catch(e=>{console.error("Error fetching certificate data:",e)})});async function downloadPDF(){if(!certificate)return;const{jsPDF:e}=window.jspdf,t=document.getElementById("card");t.style.borderRadius="0",t.style.margin="0",t.style.padding="1em",t.style.boxShadow="none";const n=await html2canvas(t,{scale:2,useCORS:!0});t.style.borderRadius="4px",t.style.padding="2em",t.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.1)";const o=n.toDataURL("image/png"),a=new e("p","mm","a4"),c=a.getImageProperties(o),i=a.internal.pageSize.getWidth(),d=c.height*i/c.width;a.addImage(o,"PNG",0,0,i,d),a.save(`${certificate.holder||"certificate"}.pdf`)}